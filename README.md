# 滴灌通·投流通展示网站

## 项目概述
**滴灌通·投流通**是一个专业的抖音电商投流资金解决方案展示平台，采用创新的**YITO收入分成融资模式**（非股非债），为品牌商家和现金权投资者提供双面服务。

### 核心特色
- 🏦 **非股非债**：无需抵押担保，没有刚性还款
- 💰 **收入分成**：按约定比例分成，风险共担
- ⚡ **资金直达**：资金直达抖音广告账户
- 📊 **YITO封顶**：单利计算，透明可控

## 在线演示
- **沙盒环境**：https://3000-ix8ugcegod23x3fqqk0dd-0e616f0a.sandbox.novita.ai

## 核心功能

### 1. 单笔联营融资方计算器
**目标用户**：需要投流资金的抖音电商品牌商家

**输入项**：
- 融资金额（例如：500,000元）
- 日均GMV（例如：300,000元）
- 分成比例（例如：15%）
- 打款频率（每日/每周/每两周，自动锚定年化成本）

**年化成本锚定规则**：
- 每日打款 → 13%
- 每周打款 → 15%
- 每两周打款 → 18%

**输出结果**：
- 年化成本（自动联动，显示锚定值）
- 每日分成支出
- 预计联营天数
- 总支付金额（YITO封顶）
- 实际融资成本（金额）
- 打款方式详情
- YITO封顶公式展示

**注意**：融资方不显示"实际年化成本率"，只显示锚定的年化成本（13%/15%/18%）和实际融资成本金额。

**YITO封顶机制**：
```
封顶金额 = 本金 × (1 + 年化成本率 × 联营天数 / 360)
```
这是**单利计算**，一旦达到封顶金额即停止收入分成。

**示例**：
- 本金：500,000元
- 年化成本：15%
- 联营12天 → 封顶502,500元
- 联营15天 → 封顶503,125元
- 联营20天 → 封顶504,167元

### 2. 单笔联营投资方计算器
**目标用户**：购买CFO资产的现金权投资者

**输入项**：
- 投资金额（例如：500,000元）
- 标的日均GMV（例如：300,000元）
- 分成比例（例如：15%）
- 目标回报率（例如：18%）
- 回款频率（每日/每周/每两周）

**一键套用功能**：可直接套用融资方计算器的数据，自动填充所有字段。

**输出结果**：
- 每日分成收入
- 预计联营天数
- 目标回收总额（YITO封顶）
- **投资周期总收益率**（整个投资周期的总回报率，不年化）
- **总收益金额**（实际赚取的利润金额）
- 回款方式详情
- 预计现金流时间表（前12期）

**总收益率说明**：
- 显示整个投资周期的总收益率（不年化）
- 公式：`总收益率 = (总回收金额 - 投资本金) / 投资本金 × 100%`
- 避免短期复利年化导致的IRR数值过高问题
- 更直观反映实际收益情况

**示例**：
- 投资金额：500,000元
- 目标回报率：18%
- 联营12天 → 封顶503,000元
- **投资周期总收益率：0.60%**（12天周期的总回报）
- **总收益金额：3,000元**
- 现金流：第1周315,000元，第2周188,000元

### 3. 联营协议信息收集模块
**功能**：收集联营协议所需的关键信息，用于生成正式协议

**收集信息类别**：
1. **联营方（品牌商家）信息**
   - 工商主体名称
   - 统一社会信用代码
   - 法定代表人
   - 注册地址
   - 经营品牌
   - 抖音店铺名称

2. **合作方（投流代理商）信息**
   - 工商主体名称
   - 统一社会信用代码

3. **联营合作条款**
   - 联营资金金额
   - 分成比例
   - 分成付款频率（自动关联年化成本）
   - 数据传输方式（手动/自动）

4. **银行账户信息**
   - 收款账户户名
   - 收款账号
   - 开户行
   - 开户支行

**操作**：
- 提交协议信息 → 记录并触发后续流程
- 预览协议内容 → 查看填写的信息

## 技术架构

### 前端技术
- **HTML/CSS**：响应式设计
- **Tailwind CSS**：快速样式开发
- **Vanilla JavaScript**：轻量级交互
- **Font Awesome**：图标库

### 后端技术
- **Hono**：轻量级Web框架
- **Cloudflare Workers**：边缘计算运行时
- **TypeScript**：类型安全

### API端点

#### POST /api/calculate-financing
融资方YITO计算

**请求体**：
```json
{
  "investmentAmount": 500000,
  "dailyGMV": 300000,
  "revenueSharingRate": 15,
  "paymentFrequency": "weekly"
}
```

**响应**：
```json
{
  "investmentAmount": 500000,
  "dailyGMV": 300000,
  "dailyRevenue": 45000,
  "revenueSharingRate": 15,
  "annualReturnRate": 15,
  "daysToComplete": 12,
  "totalPayment": 502500,
  "actualCost": 2500,
  "paymentFrequency": "每周",
  "paymentInterval": 7,
  "paymentCount": 2,
  "paymentAmount": 315000
}
```

#### POST /api/calculate-investment
投资方CFO资产投资计算

**请求体**：
```json
{
  "investmentAmount": 500000,
  "dailyGMV": 300000,
  "revenueSharingRate": 15,
  "targetReturnRate": 18,
  "paymentFrequency": "weekly"
}
```

**响应**：
```json
{
  "investmentAmount": 500000,
  "targetReturnRate": 18,
  "targetTotalReturn": 503000,
  "dailyGMV": 300000,
  "dailyRevenue": 45000,
  "revenueSharingRate": 15,
  "daysToBreakEven": 12,
  "paymentFrequency": "每周",
  "paymentInterval": 7,
  "paymentCount": 2,
  "paymentAmount": 315000,
  "totalReturn": 0.6,
  "totalProfit": 3000,
  "cashFlowSchedule": [...]
}
```

## 核心计算逻辑

### YITO封顶机制（单利）
```javascript
封顶金额 = 本金 × (1 + 年化成本率 / 100 × 联营天数 / 360)
```

**特点**：
- 使用**单利**计算，不是复利
- 一旦累计分成达到封顶金额即停止
- 透明可控，不会超额收费

### 投资周期总收益率计算
```javascript
// 计算公式（不年化）
总收益率 = (目标回收总额 - 投资本金) / 投资本金 × 100%
总收益金额 = 目标回收总额 - 投资本金
```

**为什么不使用年化IRR？**
- 短期投资（10-20天）年化后数值会非常高
- 复利年化可能导致指数爆炸问题
- 总收益率更直观，避免误导
- 投资者更关心实际收益金额而非年化率

## 项目结构

```
webapp/
├── src/
│   ├── index.tsx          # 主应用入口，API路由和页面渲染
│   └── renderer.tsx       # HTML渲染器
├── public/
│   └── static/
│       ├── app.js         # 前端交互逻辑
│       └── style.css      # 自定义样式
├── dist/                  # 构建输出目录
├── ecosystem.config.cjs   # PM2配置文件
├── wrangler.jsonc         # Cloudflare配置
├── package.json           # 项目依赖
├── tsconfig.json          # TypeScript配置
├── vite.config.ts         # Vite构建配置
└── README.md              # 项目文档
```

## 本地开发

### 安装依赖
```bash
npm install
```

### 构建项目
```bash
npm run build
```

### 启动开发服务器（沙盒环境）
```bash
# 使用PM2启动
pm2 start ecosystem.config.cjs

# 查看日志
pm2 logs webapp --nostream

# 停止服务
pm2 stop webapp
```

### 测试API
```bash
# 测试融资方计算器
curl -X POST http://localhost:3000/api/calculate-financing \
  -H "Content-Type: application/json" \
  -d '{"investmentAmount":500000,"dailyGMV":300000,"revenueSharingRate":15,"paymentFrequency":"weekly"}'

# 测试投资方计算器
curl -X POST http://localhost:3000/api/calculate-investment \
  -H "Content-Type: application/json" \
  -d '{"investmentAmount":500000,"dailyGMV":300000,"revenueSharingRate":15,"targetReturnRate":18,"paymentFrequency":"weekly"}'
```

## 部署到Cloudflare Pages

### 前置准备
1. **设置Cloudflare API Key**：
```bash
# 调用setup_cloudflare_api_key工具配置认证
```

2. **构建项目**：
```bash
npm run build
```

### 创建项目
```bash
npx wrangler pages project create webapp \
  --production-branch main \
  --compatibility-date 2024-01-01
```

### 部署
```bash
npx wrangler pages deploy dist --project-name webapp
```

### 访问URL
- 生产环境：`https://webapp.pages.dev`
- 分支环境：`https://main.webapp.pages.dev`

## 品牌背书

### 关于滴灌通
- **创始人**：李小加（前香港交易所行政总裁）
- **核心数据**：
  - 服务品牌：25,000+
  - 年营收：30亿+
  - 合作城市：300+
- **愿景**：以金融科技连接全球资本与中小微企业，让好生意不缺钱

### 投流通特色
- **抖音GMV**：3.5万亿元市场
- **投流市场**：约1万亿元规模
- **数据透明**：实时对接抖音数据
- **闭环管控**：资金直达广告账户

## 关键差异化

### vs 传统借贷
- ❌ 传统借贷：固定还款、需要抵押、刚性压力
- ✅ 投流通：收入分成、风险共担、弹性还款

### vs 股权融资
- ❌ 股权融资：稀释股权、失去控制权
- ✅ 投流通：保持股权、保持控制权

### vs 普通投资
- ❌ 普通投资：回报周期长、风险不透明
- ✅ 投流通：快速回款、YITO封顶、数据驱动

## 测试案例

### 案例1：每周打款，12天还清
**融资方**：
- 融资金额：500,000元
- 日均GMV：300,000元
- 分成比例：15%
- 打款频率：每周
- **结果**：
  - 年化成本：15%
  - 预计联营天数：12天
  - 封顶金额：502,500元
  - 实际成本：2,500元

**投资方**：
- 投资金额：500,000元
- 目标回报率：18%
- **结果**：
  - 预计联营天数：12天
  - 封顶金额：503,000元
  - 投资周期总收益率：0.60%
  - 总收益金额：3,000元

### 案例2：每日打款，20天还清
**融资方**：
- 融资金额：500,000元
- 日均GMV：300,000元
- 分成比例：15%
- 打款频率：每日
- **结果**：
  - 年化成本：13%
  - 预计联营天数：20天
  - 封顶金额：503,611元
  - 实际成本：3,611元

## 常见问题

### Q1: 为什么投资方显示总收益率而不是年化IRR？
**A**: 因为投资周期很短（通常10-20天），如果使用复利年化会导致IRR数值过高（可能超过1000%），容易产生误导。总收益率更直观，投资者可以清楚看到实际赚取的金额和百分比。

### Q2: YITO封顶机制如何保证不超额收费？
**A**: 使用单利公式：`封顶金额 = 本金 × (1 + 年化成本率 × 天数 / 360)`。一旦累计分成达到封顶金额，立即停止收入分成。

### Q3: 如何选择合适的打款频率？
**A**: 
- 每日打款：年化成本13%，适合现金流充裕的商家
- 每周打款：年化成本15%，平衡成本与便利性
- 每两周打款：年化成本18%，适合需要更长账期的商家

### Q4: 协议信息收集后会如何处理？
**A**: 信息提交后，滴灌通团队会与您联系，进行尽职调查和协议签署流程。

## 更新日志

### v1.3.0 (2025-02-05)
- ✅ 新增协议预填项收集模块
- ✅ 融资方计算器：删除"实际年化成本率"显示，只保留锚定年化成本和实际融资成本金额
- ✅ 投资方计算器：改为显示"投资周期总收益率"和"总收益金额"，不再显示年化IRR
- ✅ 统一使用"预计联营天数"替代"预计联营月数"
- ✅ 标题改为"单笔联营融资方/投资方计算器"
- ✅ 解决短期投资复利年化指数爆炸问题

### v1.2.0 (2025-02-04)
- ✅ 修正YITO封顶机制为单利计算
- ✅ 年化成本与打款频率自动联动
- ✅ 修正实际年化成本率计算公式
- ✅ 修正投资方年化收益率计算
- ✅ 新增一键套用融资方数据功能
- ✅ 新增现金流时间表展示

### v1.1.0 (2025-02-03)
- ✅ 双面平台设计：融资方+投资方
- ✅ YITO计算器（融资方）
- ✅ IRR计算器（投资方）
- ✅ 红蓝主题对照UI

### v1.0.0 (2025-02-02)
- ✅ 项目初始化
- ✅ 基础页面结构
- ✅ ROI计算功能

## 许可证
© 2025 滴灌通集团 - All Rights Reserved

## 联系我们
如需了解更多信息或申请融资服务，请访问我们的官网或联系客服团队。
